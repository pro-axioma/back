{"version":3,"file":"js/268.efdbd7d6.js","mappings":"6UASO,MAAMA,GAAS,EAAAC,EAAA,IAAgB,CACpCC,KAAM,SACNC,MAAO,CACLC,YAAaC,QACbC,YAAaD,QACbE,OAAQ,CAACC,OAAQC,QACjBC,MAAOL,YACJ,aACA,aACA,WAELM,MAAMR,EAAOS,GACX,IAAI,MACFC,GACED,EACJ,MAAM,aACJE,IACE,QAAaX,IACX,eACJY,IACE,OAAWZ,GAqBf,OApBA,EAAAa,EAAA,IAAU,KACR,IAAIC,EAAYC,EAAgBC,EAChC,OAAO,QAAahB,EAAMiB,IAAK,CAC7B,MAAS,CAAC,UAAW,CACnB,0BAA2BjB,EAAMI,OACjC,wBAAyBJ,EAAMC,YAC/B,wBAAyBD,EAAMG,YAC/B,qBAAsBO,EAAMQ,IAC5B,wBAAyBR,EAAMS,OAC/B,iBAAkBnB,EAAMO,OACvBI,EAAaS,MAAOR,EAAeQ,QACrC,CACDC,QAAS,IAAM,CAA6B,OAA3BP,EAAaJ,EAAMQ,UAAe,EAASJ,EAAWQ,KAAKZ,GAAQA,EAAMW,SAAU,QAAa,MAAO,CACtH,MAAS,mBACT,MAAS,CACPjB,QAAQ,QAAcJ,EAAMI,UAE7B,EAAC,QAAa,QAAS,KAAM,CAACM,EAAMW,cAAoD,OAAnCN,EAAiBL,EAAMa,cAAmB,EAASR,EAAeO,KAAKZ,GAA0C,OAAjCM,EAAgBN,EAAMS,aAAkB,EAASH,EAAcM,KAAKZ,KAC5M,IAEG,CAAC,CACV,I,GC9CU,OAAoB,UAAhB,eAAW,G,GAkCX,OAqBQ,eApBJ,OAmBK,YAlBL,OAEK,MAFDc,MAAM,aAAY,SAGtB,OAEK,MAFDA,MAAM,aAAY,YAGtB,OAEK,MAFDA,MAAM,aAAY,gBAGtB,OAEK,MAFDA,MAAM,aAAY,YAGtB,OAEK,MAFDA,MAAM,aAAY,aAGtB,OAEK,MAFDA,MAAM,aAAY,gB,uDAtD1C,QAoGc,U,kBAnGV,IAsBQ,EAtBR,QAsBQ,U,kBArBJ,IAoBQ,EApBR,QAoBQ,KApBDC,KAAK,MAAI,C,kBACZ,IAAoB,CAApB,GACA,QAQU,K,WAPG,EAAAC,OAAOC,aAAaC,O,qCAApB,EAAAF,OAAOC,aAAmB,UACnCE,KAAK,UACLC,SAAA,GACA,cAAY,UACZC,MAAM,U,mBAEV,IAA4B,E,iBAA1B,EAAAL,OAAOC,aAAaK,MAAI,M,wBAE1B,QAQU,K,WAPG,EAAAN,OAAOO,WAAWL,O,qCAAlB,EAAAF,OAAOO,WAAiB,UACjCJ,KAAK,QACLC,SAAA,GACA,cAAY,UACZC,MAAM,U,mBAEV,IAA0B,E,iBAAxB,EAAAL,OAAOO,WAAWD,MAAI,M,0CAIhC,QASQ,U,kBARJ,IAOQ,EAPR,QAOQ,KAPDP,KAAK,MAAI,C,kBACZ,IAKQ,EALR,QAKQ,KAJRS,MAAM,UACLC,GAAI,oB,mBACJ,IAED,E,QAFC,wB,yBAKT,QAiEQ,U,kBAhEJ,IA+DQ,EA/DR,QA+DQ,KA/DDV,KAAK,MAAI,C,kBACZ,IA0DU,C,KA1DUW,MAAMC,OAAS,I,WAAnC,QA0DU,W,kBAzDN,IAqBQ,CArBR,GAsBA,OAkCQ,gB,aAjCJ,QAgCK,mBA/BiB,EAAAD,OAAK,CAAnBE,EAAMC,M,WADd,QAgCK,MA9BJA,IAAKD,EAAKE,I,EAEP,OAAsB,mBAAfF,EAAKE,IAAE,IACd,OAAyB,mBAAlBF,EAAKG,OAAK,IACjB,OAA8B,mBAAvBH,EAAKI,YAAU,IACtB,OAAuB,mBAAhBJ,EAAKK,KAAG,IACf,OAA4B,mBAArBL,EAAKM,UAAQ,IACpB,OAsBK,YApBD,QAkBS,UAjBQC,WAAS,SACtB,EAD0B7C,WAAK,EAC/B,QAKQ,KALR,QAKQ,CAJRkC,MAAM,WACElC,GAAK,C,kBAEb,IAA8B,E,iBAA5B,EAAA8C,cAAcR,EAAKS,SAAM,M,gCAG/B,IAQS,EART,QAQS,U,kBANL,IAA+F,G,WAD/F,QAMc,mBALU,CAAC,CAAChD,KAAM,UAAWgD,QAAQ,GAAO,CAAChD,KAAM,aAAcgD,QAAQ,KAAO,CAAtFlB,EAAMmB,KADd,QAMc,KAJbT,IAAKS,EACL5B,MAAO4B,G,mBAER,IAAqG,EAArG,QAAqG,KAAjF,QAAK,GAAE,EAAAC,aAAaX,EAAKE,GAAIX,EAAKkB,OAAQR,I,mBAAM,IAAa,E,iBAAXV,EAAK9B,MAAI,M,wHASnG,QAEI,MAFM,8B,wBAUtB,OACImD,OACI,MAAO,CACHd,MAAO,GACPV,OAAQ,CACJC,aAAc,CACVC,QAAQ,EACRI,KAAM,IAEVC,WAAY,CACRL,QAAQ,EACRI,KAAM,KAItB,EACAmB,QAAS,CACLC,WACI,IAAIC,EAAU,IAAIC,QAClBD,EAAQE,OAAO,gBAAiB,UAAYC,KAAKC,OAAOC,MAAMC,KAAKC,OAEnE,IAAIC,EAAiB,CACjBC,OAAQ,MACRT,QAASA,EACTU,SAAU,UAGdC,MAAMR,KAAKC,OAAOC,MAAMO,OAAOC,KAAO,kCAAmCL,GACxEM,MAAKC,IACCA,EAASC,IACRD,EAASE,OAAOH,MAAKC,IACjBZ,KAAKpB,MAAQgC,EAASG,SAI9B,IAEHC,OAAMC,GAASC,MAAM,qBAC1B,EACA5B,cAAcC,GACV,OAAIA,EAIG,UAHI,YAIf,EACAE,aAAaT,EAAIO,EAAQR,GACrB,IAAIc,EAAU,IAAIC,QAClBD,EAAQE,OAAO,gBAAiB,UAAYC,KAAKC,OAAOC,MAAMC,KAAKC,OACnEP,EAAQE,OAAO,eAAgB,oBAE/B,IAAIM,EAAiB,CACjBC,OAAQ,OACRT,QAASA,EACTsB,KAAMC,KAAKC,UAAU,CAAC,GAAMrC,EAAI,OAAUO,IAC1CgB,SAAU,UAGdC,MAAMR,KAAKC,OAAOC,MAAMO,OAAOC,KAAO,uCAAwCL,GAC7EM,MAAKC,IACCA,EAASC,IACRb,KAAKpB,MAAMG,GAAKQ,OAASA,EACzBS,KAAK9B,OAAOC,aAAaK,KAAO,iCAChCwB,KAAK9B,OAAOC,aAAaC,QAAS,EAClCkD,YAAW,KACPtB,KAAK9B,OAAOC,aAAaC,QAAS,IACnC,OAEH4B,KAAK9B,OAAOO,WAAWD,KAAO,qCAC9BwB,KAAK9B,OAAOO,WAAWL,QAAS,EAChCkD,YAAW,KACPtB,KAAK9B,OAAOO,WAAWL,QAAS,IACjC,KACP,IAEH4C,OAAMC,GAASC,MAAM,qBAC1B,GAEJK,UACIvB,KAAKJ,UACT,G,UCtLJ,MAAM4B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://task-front/./node_modules/vuetify/lib/components/VTable/VTable.mjs","webpack://task-front/./src/views/PaymentsView.vue","webpack://task-front/./src/views/PaymentsView.vue?33cd"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\n// Styles\nimport \"./VTable.css\";\n\n// Composables\nimport { makeDensityProps, useDensity } from \"../../composables/density.mjs\";\nimport { makeTagProps } from \"../../composables/tag.mjs\";\nimport { makeThemeProps, provideTheme } from \"../../composables/theme.mjs\"; // Utilities\nimport { convertToUnit, defineComponent, useRender } from \"../../util/index.mjs\";\nexport const VTable = defineComponent({\n  name: 'VTable',\n  props: {\n    fixedHeader: Boolean,\n    fixedFooter: Boolean,\n    height: [Number, String],\n    hover: Boolean,\n    ...makeDensityProps(),\n    ...makeTagProps(),\n    ...makeThemeProps()\n  },\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const {\n      themeClasses\n    } = provideTheme(props);\n    const {\n      densityClasses\n    } = useDensity(props);\n    useRender(() => {\n      var _slots$top, _slots$wrapper, _slots$bottom;\n      return _createVNode(props.tag, {\n        \"class\": ['v-table', {\n          'v-table--fixed-height': !!props.height,\n          'v-table--fixed-header': props.fixedHeader,\n          'v-table--fixed-footer': props.fixedFooter,\n          'v-table--has-top': !!slots.top,\n          'v-table--has-bottom': !!slots.bottom,\n          'v-table--hover': props.hover\n        }, themeClasses.value, densityClasses.value]\n      }, {\n        default: () => [(_slots$top = slots.top) == null ? void 0 : _slots$top.call(slots), slots.default ? _createVNode(\"div\", {\n          \"class\": \"v-table__wrapper\",\n          \"style\": {\n            height: convertToUnit(props.height)\n          }\n        }, [_createVNode(\"table\", null, [slots.default()])]) : (_slots$wrapper = slots.wrapper) == null ? void 0 : _slots$wrapper.call(slots), (_slots$bottom = slots.bottom) == null ? void 0 : _slots$bottom.call(slots)]\n      });\n    });\n    return {};\n  }\n});\n//# sourceMappingURL=VTable.mjs.map","<template>\r\n\r\n<v-container>\r\n    <v-row>\r\n        <v-col cols=\"12\">\r\n            <h2>Все выплаты</h2>\r\n            <v-alert\r\n                v-model=\"alerts.successAlert.active\"\r\n                type=\"success\"\r\n                closable\r\n                close-label=\"Закрыть\"\r\n                title=\"Успех!\"\r\n            >\r\n            {{alerts.successAlert.text}}\r\n            </v-alert>\r\n            <v-alert\r\n                v-model=\"alerts.errorAlert.active\"\r\n                type=\"error\"\r\n                closable\r\n                close-label=\"Закрыть\"\r\n                title=\"Успех!\"\r\n            >\r\n            {{alerts.errorAlert.text}}\r\n            </v-alert>\r\n        </v-col>\r\n    </v-row>\r\n    <v-row>\r\n        <v-col cols=\"12\">\r\n            <v-btn\r\n            color=\"primary\"\r\n            :to=\"'/payments/create'\"\r\n            >\r\n            Создать выплату\r\n            </v-btn>\r\n        </v-col>\r\n    </v-row>\r\n    <v-row>\r\n        <v-col cols=\"12\">\r\n            <v-table v-if=\"this.items.length > 0\">\r\n                <thead>\r\n                    <tr>\r\n                    <th class=\"text-left\">\r\n                        ID\r\n                    </th>\r\n                    <th class=\"text-left\">\r\n                        Логин\r\n                    </th>\r\n                    <th class=\"text-left\">\r\n                        Реквизиты\r\n                    </th>\r\n                    <th class=\"text-left\">\r\n                        Сумма\r\n                    </th>\r\n                    <th class=\"text-left\">\r\n                        Валюта\r\n                    </th>\r\n                    <th class=\"text-left\">\r\n                        Статус\r\n                    </th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr\r\n                    v-for=\"(item, key) in items\"\r\n                    :key=\"item.id\"\r\n                    >\r\n                        <td>{{ item.id }}</td>\r\n                        <td>{{ item.login }}</td>\r\n                        <td>{{ item.properties }}</td>\r\n                        <td>{{ item.sum }}</td>\r\n                        <td>{{ item.currency }}</td>\r\n                        <td>\r\n\r\n                            <v-menu>\r\n                            <template v-slot:activator=\"{ props }\">\r\n                                <v-btn\r\n                                color=\"primary\"\r\n                                v-bind=\"props\"\r\n                                >\r\n                                {{paymentStatus(item.status)}}\r\n                                </v-btn>\r\n                            </template>\r\n                            <v-list>\r\n                                <v-list-item\r\n                                v-for=\"(type, index) in [{name: 'Оплачен', status: true}, {name: 'Не оплачен', status: false}]\"\r\n                                :key=\"index\"\r\n                                :value=\"index\"\r\n                                >\r\n                                <v-list-item-title @click=\"changeStatus(item.id, type.status, key)\">{{type.name}}</v-list-item-title>\r\n                                </v-list-item>\r\n                            </v-list>\r\n                            </v-menu>\r\n\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </v-table>\r\n            <p v-else>\r\n                Выплат не найдено...\r\n            </p>\r\n        </v-col>\r\n    </v-row>\r\n</v-container>\r\n\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            items: [],\r\n            alerts: {\r\n                successAlert: {\r\n                    active: false,\r\n                    text: ''\r\n                },\r\n                errorAlert: {\r\n                    active: false,\r\n                    text: ''\r\n                }\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        getItems(){\r\n            var headers = new Headers()\r\n            headers.append(\"Authorization\", \"Bearer \" + this.$store.state.user.token)\r\n\r\n            var requestOptions = {\r\n                method: 'GET',\r\n                headers: headers,\r\n                redirect: 'follow'\r\n            };\r\n\r\n            fetch(this.$store.state.global.host + \"/api/v1/admin/payments/get-list\", requestOptions)\r\n            .then(response => {\r\n                if(response.ok){\r\n                    response.json().then(response => {\r\n                        this.items = response.result\r\n                    })\r\n                }else{\r\n\r\n                }\r\n            })\r\n            .catch(error => alert('Произошла ошибка'));\r\n        },\r\n        paymentStatus(status){\r\n            if(!status){\r\n                return 'Не оплачен'\r\n            }\r\n\r\n            return 'Оплачен'\r\n        },\r\n        changeStatus(id, status, key){\r\n            var headers = new Headers()\r\n            headers.append(\"Authorization\", \"Bearer \" + this.$store.state.user.token)\r\n            headers.append(\"Content-Type\", \"application/json\")\r\n\r\n            var requestOptions = {\r\n                method: 'POST',\r\n                headers: headers,\r\n                body: JSON.stringify({\"id\": id, \"status\": status}),\r\n                redirect: 'follow'\r\n            };\r\n\r\n            fetch(this.$store.state.global.host + \"/api/v1/admin/payments/status-update\", requestOptions)\r\n            .then(response => {\r\n                if(response.ok){\r\n                    this.items[key].status = status\r\n                    this.alerts.successAlert.text = 'Статус выплаты успешно изменён'\r\n                    this.alerts.successAlert.active = true\r\n                    setTimeout(() => {\r\n                        this.alerts.successAlert.active = false\r\n                    }, 2000);\r\n                }else{\r\n                    this.alerts.errorAlert.text = 'Не удалось изменить статус выплаты'\r\n                    this.alerts.errorAlert.active = true\r\n                    setTimeout(() => {\r\n                        this.alerts.errorAlert.active = false\r\n                    }, 2000);\r\n                }\r\n            })\r\n            .catch(error => alert('Произошла ошибка'))\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getItems()\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import { render } from \"./PaymentsView.vue?vue&type=template&id=dd41564e\"\nimport script from \"./PaymentsView.vue?vue&type=script&lang=js\"\nexport * from \"./PaymentsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\SFTP\\\\task-front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["VTable","defineComponent","name","props","fixedHeader","Boolean","fixedFooter","height","Number","String","hover","setup","_ref","slots","themeClasses","densityClasses","useRender","_slots$top","_slots$wrapper","_slots$bottom","tag","top","bottom","value","default","call","wrapper","class","cols","alerts","successAlert","active","type","closable","title","text","errorAlert","color","to","items","length","item","key","id","login","properties","sum","currency","activator","paymentStatus","status","index","changeStatus","data","methods","getItems","headers","Headers","append","this","$store","state","user","token","requestOptions","method","redirect","fetch","global","host","then","response","ok","json","result","catch","error","alert","body","JSON","stringify","setTimeout","mounted","__exports__","render"],"sourceRoot":""}